<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Registration</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/main.css') }}">
</head>
<body>
  <div class="login-box">
    <div class="login-title">Register New User</div>

    {% if message %}
      <div class="error-msg">{{ message }}</div>
    {% endif %}

    {% if success %}
      <div class="success-msg">{{ success }}</div>
    {% endif %}

    <form method="post">
      <input class="form-input" type="text" name="username" placeholder="Username" required><br>
      <input class="form-input" type="password" name="password" placeholder="Password" required><br>

      <select class="form-input" name="role" required>
        <option value="">-- Select Role --</option>
        <option value="admin">Admin</option>
        <option value="user">User</option>
      </select><br>

      <button class="login-btn" type="submit">Register</button>
    </form>
  </div>
  <script>
  window.addEventListener('DOMContentLoaded', () => {
    const successBox = document.querySelector('.success-msg');
    const errorBox = document.querySelector('.error-msg');

    [successBox, errorBox].forEach(box => {
      if (box) {
        setTimeout(() => {
          box.style.opacity = '0';
          setTimeout(() => box.remove(), 500);
        }, 3000); // 3 secondi
      }
    });
  });
</script>

<a href="/logout_admin" class="logout-btn">Logout</a>

<button onclick="goBackAndReload()" class="back-btn">⬅️ Back to Previous Page</button>

<script>
  function goBackAndReload() {
    const referrer = document.referrer;
    if (referrer) {
      window.location.href = referrer;  // forza caricamento pagina precedente (con refresh)
    } else {
      window.history.back(); // fallback
    }
  }
</script>
</body>
</html>
